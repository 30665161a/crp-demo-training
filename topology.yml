---
name: vpn-topology

hosts:
  - name: dmz-vpn
    base_box:
        image: debian-10
        man_user: debian
    flavor: standard.medium

  - name: client
    base_box:
        image: windows-10
        man_user: windows
        mng_protocol: winrm
    flavor: standard.large

routers:
  - name: firewall
    base_box:
        image: debian-10-x86_64
        man_user: debian
    flavor: standard.medium

  - name: internet-router
    base_box:
        image: debian-9-x86_64
        man_user: debian
    flavor: csirtmu.small2x4

networks:
  - name: appSegment
    cidr: 172.18.1.0/24

  - name: userSegment
    cidr: 172.18.3.0/24

  - name: dmzSegment
    cidr: 172.18.2.0/24

  - name: internet
    cidr: 185.48.120.0/21

  - name: clientInternet
    cidr: 46.167.206.0/24

net_mappings:
  - host: dmz-vpn
    network: dmzSegment
    ip: 172.18.2.22

  - host: client
    network: clientInternet
    ip: 46.167.206.45

router_mappings:
  - router: internet-router
    network: internet
    ip: 185.48.120.1

  - router: firewall
    network: dmzSegment
    ip: 172.18.2.1

  - router: firewall
    network: userSegment
    ip: 172.18.3.1

  - router: firewall
    network: appSegment
    ip: 172.18.1.1

  - router: internet-router
    network: clientInternet
    ip: 46.167.206.1

groups:
  - name: user-accessible
    nodes:
      - dmz-vpn
  - name: windows
    nodes:
      - client

